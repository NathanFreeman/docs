# 非同期ファイル操作

`Swoole`の[ワンクリックコーリoutine化](/runtime)は、PHPのファイル操作を同期で非阻塞に変更するのが非常に簡単になります。`Swoole`には、2種類の異なるファイル非同期戦略が組み込まれています。

## スレッドプール

* `スレッドプール`は`Swoole`のデフォルトのファイル非同期操作であり、ユーザーがファイル操作を发起すると、`Swoole`はこの操作を直接スレッドプールに投递し、サブスレッドがファイル操作を完了し、完了後にコーリoutineに戻ります。
* PHPのファイル操作関数はすべてスレッドプールを通じて非同期操作を実現できます。例えば`file_get_contents`、`fopen`などです。
* 依赖するライブラリは必要なく、互換性が高く、すぐに使用できます。

## io_uring

* `io_uring`は`Swoole v6.0`以降に組み込まれた戦略で、`io_uring`と`epoll`に基づいて非同期を実現します。
* 推進性が高く、大量のファイル非同期操作を処理できます。
* Linuxバージョンに要求があり、また`liburing`という共有ライブラリに依存する必要があります。一部のオペレーティングシステムではこの特性を使用できません。
* ファイル記述子に基づいてファイル非同期を実現するため、PHPのファイル操作関数のサポートが限られています。
* Linuxカーネルバージョンに高い要求があります。

!> システムに`liburing`がインストールされ、`Swoole`をコンパイルする際に`--enable-iouring`フラグを有効にすると使用できます。

!> `io_uring`を開始してもスレッドプールモードを置き換えることはなく、一部の`io_uring`ではコーリoutine化できない関数は依然としてスレッドプールで処理されます。

!> `io_uring`は`file_get_contents`、`file_put_contents`、`fopen`、`fclose`、`fread`、`fwrite`、`mkdir`、`unlink`、`fsync`、`fdatasync`、`rename`、`fstat`、`lstat`、`filesize`関数のみを処理できます。
