# Процесс\Управитель

Управитель процессов, реализованный на основе [Процессного пула](/process/process_pool). Позволяет управлять несколькими процессами. По сравнению с `Процессным пулом`, его очень удобно создавать множество процессов для выполнения различных задач и контролировать, должен ли каждый процесс работать в среде корoutine.

## Поддержка версий

| Версия | Класс | Обновления |
| ------ | ----------------------------- | ---------------------------------------- |
| v4.5.3 | Swoole\Process\ProcessManager | - |
| v4.5.5 | Swoole\Process\Manager | Переименование, Manager стал синонимом ProcessManager |

!> Используется в версиях выше `v4.5.3`.

## Примеры использования

```php
use Swoole\Process\Manager;
use Swoole\Process\Pool;

$pm = new Manager();

for ($i = 0; $i < 2; $i++) {
    $pm->add(function (Pool $pool, int $workerId) {
    });
}

$pm->start();
```

## Методы

### __construct()

Конструктор.

```php
Swoole\Process\Manager::__construct(int $ipcType = SWOOLE_IPC_NONE, int $msgQueueKey = 0);
```

* **Параметры**

  * **`int $ipcType`**
    * **Функция**: режим межпроцессного общения, такой же как и у `Process\Pool` `$ipc_type`【по умолчанию `0`, что означает использование никаких межпроцессных коммуникационных функций】
    * **По умолчанию**: `0`
    * **Другие значения**: нет

  * **`int $msgQueueKey`**
    * **Функция**: ключ сообщения队列, такой же как и у `Process\Pool` `$msgqueue_key`
    * **По умолчанию**: нет
    * **Другие значения**: нет

### setIPCType()

Установить способ коммуникации между рабочими процессами.

```php
Swoole\Process\Manager->setIPCType(int $ipcType): self;
```

* **Параметры**

  * **`int $ipcType`**
    * **Функция**: режим межпроцессного общения
    * **По умолчанию**: нет
    * **Другие значения**: нет

### getIPCType()

Получить способ коммуникации между рабочими процессами.

```php
Swoole\Process\Manager->getIPCType(): int;
```

### setMsgQueueKey()

Установить ключ сообщения队列.

```php
Swoole\Process\Manager->setMsgQueueKey(int $msgQueueKey): self;
```

* **Параметры**

  * **`int $msgQueueKey`**
    * **Функция**: ключ сообщения队列
    * **По умолчанию**: нет
    * **Другие значения**: нет

### getMsgQueueKey()

Получить ключ сообщения队列.

```php
Swoole\Process\Manager->getMsgQueueKey(): int;
```

### add()

Добавить рабочий процесс.

```php
Swoole\Process\Manager->add(callable $func, bool $enableCoroutine = false): self;
```

* **Параметры**

  * **`callable $func`**
    * **Функция**: обратная функция, выполняемая текущим процессом
    * **По умолчанию**: нет
    * **Другие значения**: нет

  * **`bool $enableCoroutine`**
    * **Функция**: создать ли для этого процесса корoutine для выполнения обратной функции
    * **По умолчанию**: `false`
    * **Другие значения**: нет

### addBatch()

Блоково добавить рабочие процессы.

```php
Swoole\Process\Manager->addBatch(int $workerNum, callable $func, bool $enableCoroutine = false): self
```

* **Параметры**

  * **`int $workerNum`**
    * **Функция**: количество процессов для добавления
    * **По умолчанию**: нет
    * **Другие значения**: нет

  * **`callable $func`**
    * **Функция**: обратная функция, выполняемая этими процессами
    * **По умолчанию**: нет
    * **Другие значения**: нет

  * **`bool $enableCoroutine`**
    * **Функция**: создать ли для этих процессов корoutine для выполнения обратной функции
    * **По умолчанию**: нет
    * **Другие значения**: нет

### start()

Запустить рабочие процессы.

```php
Swoole\Process\Manager->start(): void
```
