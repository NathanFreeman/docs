# Нестабильные изменения вниз


## v5.0.0
* Изменение默认ного режима работы `Server` на `SWOOLE_BASE`
* Минимальная версия `PHP` увеличена до `8.0`
* Все методы классов и функции теперь имеют типовые ограничения, перешли на сильную типичность
* Удаление подкресленной `_PSR-0` классовых имен, оставляются только命名空间 стиль классовых имен, например, `swoole_server` должен быть изменен на `Swoole\Server`
* `Swoole\Coroutine\Redis` и `Swoole\Coroutine\MySQL` помечены как устаревшие, пожалуйста, используйте `Runtime Hook` + Native `Redis`/`MySQL` клиенты



## v4.8.0


- В режиме `BASE`回调 `onStart` будет всегда вызываться при запуске первого рабочих процесса (`workerId` равен `0`), до `onWorkerStart`. В функции `onStart` всегда можно использовать API CORO, при серьезной ошибке в `Worker-0`, который приводит к перезапуску, `onStart` будет снова вызван
В предыдущих версиях `onStart` вызывался в `Worker-0`, когда было только один рабочий процесс. Когда было несколько рабочих процессов, он выполнялся в процессе `Manager`.


## v4.7.0


- Удаление `Table\Row`, `Table` больше не поддерживает чтение и письмо в виде массива


## v4.6.0



- Удаление максимального ограничения `session id`, повторения больше нет

- При использовании CORO отключены небезопасные функции, включая `pcntl_fork`/`pcntl_wait`/`pcntl_waitpid`/`pcntl_sigtimedwait`

- По умолчанию включен hook coroutine

- Больше не поддерживается PHP7.1
- `Event::rshutdown()` помечен как устаревший, пожалуйста, используйте Coroutine\run


## v4.5.4



- `SWOOLE_HOOK_ALL` включает `SWOOLE_HOOK_CURL`
- Удаление `ssl_method`, поддержка `ssl_protocols`


## v4.4.12


- Эта версия поддерживает сжатие WebSocket кадров, изменен третий параметр метода push на flags, например, если не установлено strict_types, код будет работать без изменений совместимости, в противном случае возникнет ошибка типа, когда bool невозможно преобразовать в int implicitly, эта проблема будет исправлена в v4.4.13


## v4.4.1


- Регистрация сигналов больше не используется как условие для поддержания событийного цикла, **если программа зарегистрировала сигнал, но не сделала другого работы, она будет считаться свободной и немедленно завершится** (в это время можно зарегистрировать таймер, чтобы предотвратить завершение процесса)


## v4.4.0



- В соответствии с официальной версией `PHP`, больше не поддерживается PHP7.0 (@matyhtf)

- Удаление модуля `Serialize`, он будет поддерживаться в отдельном [ext-serialize](https://github.com/swoole/ext-serialize) расширении

- Удаление модуля `PostgreSQL`, он будет поддерживаться в отдельном [ext-postgresql](https://github.com/swoole/ext-postgresql) расширении

- `Runtime::enableCoroutine` больше не будет автоматически совместим с внутренними и внешними средами CORO, как только он включен, все блокирующие операции должны быть вызваны внутри CORO (@matyhtf)
- Поскольку был введен совершенно новый CORO `MySQL` клиентский драйвер, нижестоящая дизайн стала более стандартизированной, но есть некоторые небольшие несовместимости вниз (см. [Обновление 4.4.0](https://wiki.swoole.com/wiki/page/p-4.4.0.html))


## v4.3.0


- Удаление всех асинхронных модулей, см. [Отдельные асинхронные расширения](https://wiki.swoole.com/wiki/page/p-async_ext.html) или [Обновление 4.3.0](https://wiki.swoole.com/wiki/page/p-4.3.0.html)


## v4.2.13

> Из-за неизбежных несовместимостей, вызванных проблемами в дизайне исторических API

* Изменение операций подписки на режим Redis客户端 CORO, см. [Подписка на режим](https://wiki.swoole.com/#/coroutine_client/redis?id=%e8%ae%a2%e9%98%85%e6%a8%a1%e5%bc%8f)


## v4.2.12

> Экспериментальная функция + из-за неизбежных несовместимостей, вызванных проблемами в дизайне исторических API


- Удаление конфигурационного элемента `task_async`, замененного на [task_enable_coroutine](https://wiki.swoole.com/#/server/setting?id=task_enable_coroutine)


## v4.2.5


- Удаление поддержки `UDP` клиентов для `onReceive` и `Server::getClientInfo`


## v4.2.0


- Полностью удален асинхронный `swoole_http2_client`, пожалуйста, используйте CORO HTTP2 клиент


## v4.0.4

Начиная с этой версии, асинхронный `Http2\Client` будет вызывать `E_DEPRECATED` предупреждение и будет удален в следующем выпуске, пожалуйста, используйте `Coroutine\Http2\Client` вместо него

Свойство `body` класса `Http2\Response` было переименовано в `data`, эта изменение сделано для обеспечения единства между `request` и `response`, а также более соответствует названию типа кадров по HTTP2 протоколу

Начиная с этой версии, `Coroutine\Http2\Client` обладает относительно полной поддержкой HTTP2 протокола, что удовлетворяет потребности предприятий в производственных средах, таких как `grpc`, `etcd` и т.д., поэтому ряд изменений, связанных с HTTP2, является крайне необходимыми


## v4.0.3

Обратились к `swoole_http2_response` и `swoole_http2_request` так, чтобы они были согласованы, все названия свойств изменены на множественное число, затрагиваются следующие свойства



- `headers`
- `cookies`


## v4.0.2

> Из-за слишком сложного нижестоящего реализации, затрудняющего обслуживание, а также из-за частых ошибок пользователей в их использовании, временно удаляются следующие API:


- `Coroutine\Channel::select`

Однако в то же время добавлен второй параметр метода `Coroutine\Channel->pop` с `timeout`, чтобы удовлетворить потребности разработчиков


## v4.0

> Благодаря обновлению ядра CORO,协程 могут быть вызваны в любой функции и в любом месте без особых действий, поэтому удаляются следующие API


- `Coroutine::call_user_func`
- `Coroutine::call_user_func_array`
