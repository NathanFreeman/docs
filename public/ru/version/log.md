# Обновление версий

Начиная с версии `v1.5`, мы установили строгую систему записи обновлений версий. В настоящее время среднее время между обновлениями büyük-версий составляет полгода, а между малыми-версиями - `2-4` недели.

## Рекомендуемые версии PHP

* 8.0
* 8.1
* 8.2
* 8.3

## Рекомендуемые версии Swoole
`Swoole6.x` и `Swoole5.x`

Разница между ними заключается в следующем: `v6.x` - это активная ветвь разработки, в то время как `v5.x` - это **не** активная ветвь разработки, в ней только исправляются `BUG`ы.

!> verzии `v4.x` и выше можно настроить в [enable_coroutine](/server/setting?id=enable_coroutine), чтобы отключить функции совместимости с корутинами и сделать их не корутинными.

## Типы версий

* `alpha` - пробная версия с функциями, означает, что задачи, запланированные в разработке, завершены, и они открыты для публичного обзора, возможно, в них будет много `BUG`ов.
* `beta` - тестовая версия, означает, что она уже может использоваться для тестирования в развивающей среде, возможно, в ней будут `BUG`ы.
* `rc[1-n]` - Candidate Release, означает, что мы находимся в цикле выпуска и проводим широкие тесты, в этот период возможно обнаружение `BUG`ов.
* Без суффикса означает стабильную версию, означает, что эта версия полностью разработана и может быть официально использована.

## 查看 текущую информацию о версии

```shell
php --ri swoole
```

## v6.0.0

### Новые функции

- `Swoole` теперь поддерживает многопроцессорный режим. Когда `php` работает в режиме ZTS и при компиляции `Swoole` используется флаг `--enable-swoole-thread`, можно использовать многопроцессорный режим.

- Добавлена новая класс управления线程ами `Swoole\Thread`. @matyhtf

- Добавлен новый блокировочный класс для线程ов `Swoole\Thread\Lock`. @matyhtf

- Добавлены новые атомные Counters для线程ов `Swoole\Thread\Atomic`, `Swoole\Thread\Atomic\Long`. @matyhtf

- Добавлены новые безопасные并发ные контейнеры `Swoole\Thread\Map`, `Swoole\Thread\ArrayList`, `Swoole\Thread\Queue`. @matyhtf

- Поддержка асинхронных операций с файлами, используя `iouring` в качестве подложного двигателя. При установке `liburing` и включении флага `--enable-iouring` при компиляции `Swoole`, функции `file_get_contents`, `file_put_contents`, `fopen`, `fclose`, `fread`, `fwrite`, `mkdir`, `unlink`, `fsync`, `fdatasync`, `rename`, `fstat`, `lstat`, `filesize` будут работать асинхронно с помощью `iouring`. @matyhtf @NathanFreeman
- Обновлена версия `Boost Context` до 1.84. Теперь процессоры Loongson также могут использовать корутины. @NathanFreeman

### Исправления ошибок

- Исправлена проблема с установкой через `pecl`. @remicollet

- Исправлена проблема с тем, что клиент `Swoole\Coroutine\FastCGI\Client` не может установить keepalive. @NathanFreeman

- Исправлена проблема, когда параметры запроса превышают `max_input_vars`, что приводит к ошибкам и постоянному перезапуску процесса. @NathanFreeman

- Исправлена неизвестная проблема, возникающая при использовании `Swoole\Event::wait()` в корутинах. @matyhtf

- Исправлена проблема с отсутствием поддержки pty для `proc_open` в корутинном режиме. @matyhtf

- Исправлена проблема с segmentation fault в `pdo_sqlite` при использовании PHP 8.3. @NathanFreeman

- Исправлены ненужные предупреждения при компиляции `Swoole`. @Appla @NathanFreeman

- Исправлена проблема, когда если `STDOUT/STDERR` уже закрыты, низкоуровневый вызов `zend_fetch_resource2_ex` может вызвать ошибку. @Appla @matyhtf

- Исправлена проблема с неправильной конфигурацией `set_tcp_nodelay`. @matyhtf

- Исправлена случайная проблема с Triggers of Unreachable Branches при загрузке файлов. @NathanFreeman

- Исправлена проблема, когда установка `dispatch_func` приводит к ошибкам на уровне PHP. @NathanFreeman

- Исправлена проблема с устаревшим использованием AC_PROG_CC_C99 в autoconf >= 2.70. @petk

- Когда создание нити терпит неудачу,捕获抛出 exception. @matyhtf

- Исправлена проблема с undefined `_tsrm_ls_cache`. @jingjingxyk
- Исправлена проблема с fatal error при компиляции с `GCC 14`. @remicollet

### Оптимизации ядра

- Удаление ненужного проверки `socket structs`. @petk

- Обновление библиотеки swoole. @deminy

- `Swoole\Http\Response` теперь поддерживает статусный код 451. @abnegate

- Синхронизация кода операций с `файлами` в различных версиях PHP. @NathanFreeman

- Синхронизация кода операций с `pdo` в различных версиях PHP. @NathanFreeman

- Оптимизация кода функции `Socket::ssl_recv()`. @matyhtf

- Оптимизация config.m4, некоторые настройки теперь могут быть сделаны с помощью `pkg-config`. @NathanFreeman

- Оптимизация использования динамических массивов при `анализе` заголовков запросов. @NathanFreeman

- Оптимизация жизни файловых дескрипторов `fd` в многопроцессорном режиме. @matyhtf

- Оптимизация некоторых основных логик корутин. @matyhtf

### Отказ от поддержки

- Support for `PHP 8.0` is discontinued.

- Support for `Swoole\Coroutine\MySQL` coroutine client is discontinued.

- Support for `Swoole\Coroutine\Redis` coroutine client is discontinued.

- Support for `Swoole\Coroutine\PostgreSQL` coroutine client is discontinued.

## v5.1.3

### Исправления ошибок:

- Исправлена проблема с установкой через `pecl`.

- Исправлена проблема с тем, что клиент `Swoole\Coroutine\FastCGI\Client` не может установить keepalive.

- Исправлена проблема, когда параметры запроса превышают `max_input_vars`, что приводит к ошибкам и постоянному перезапуску процесса.

- Исправлена неизвестная проблема, возникающая при использовании `Swoole\Event::wait()` в корутинах.

- Исправлена проблема с отсутствием поддержки pty для `proc_open` в корутинном режиме.

- Исправлена проблема с segmentation fault в `pdo_sqlite` при использовании PHP 8.3.

- Исправлены ненужные предупреждения при компиляции `Swoole`.

- Исправлена проблема с тем, что если `STDOUT/STDERR` уже закрыты, низкоуровневый вызов `zend_fetch_resource2_ex` может вызвать ошибки.

- Исправлена проблема с неправильной конфигурацией `set_tcp_nodelay`.

- Исправлена случайная проблема с Triggers of Unreachable Branches при загрузке файлов.

- Исправлена проблема, когда установка `dispatch_func` приводит к ошибкам на уровне PHP.

- Исправлена проблема с устаревшим использованием AC_PROG_CC_C99 в autoconf >= 2.70.

### Оптимизации ядра:

- Удаление ненужного проверки `socket structs`.

- Обновление библиотеки swoole.

- `Swoole\Http\Response` теперь поддерживает статусный код 451.

- Синхронизация кода операций с `файлами` в различных версиях PHP.

- Синхронизация кода операций с `pdo` в различных версиях PHP.

- Оптимизация кода функции `Socket::ssl_recv()`.

- Оптимизация config.m4, некоторые настройки теперь могут быть сделаны с помощью `pkg-config`. 

- Оптимизация использования динамических массивов при `анализе` заголовков запросов. 

## v5.1.2

### Исправления ошибок

- Поддержка встроенного sapi.

- Исправлена проблема совместимости с PHP 8.3 и ZEND_CHECK_STACK_LIMIT.

- Исправлена проблема отсутствия заголовка Content-Range в ответе, когда возвращается весь контент файла в ответ на запрос с диапазоном.

- Исправлен обрезанный cookie.

- Исправлена проблема с崩溃ом native-curl в PHP 8.3.
- Исправлена ошибка с недействительным значением errno после вызова Server::Manager::wait().
- Исправлена опечатка в HTTP2.

### Оптимизации

- Оптимизирован rendimiento HTTP-сервера.
- Добавлены значения для эффективного закрытия WebSocket: CLOSE_SERVICE_RESTART, CLOSE_TRY_AGAIN_LATER, CLOSE_BAD_GATEWAY.

## v5.1.1

### Исправления ошибок

- Исправлена проблема утечки памяти в http-клиентском协程е.
- Исправлена проблема несовместимости pdo_odbc с协程ами.
- Исправлена ошибка при выполнении socket_import_stream().
- Исправлена проблема с отсутствием обработки пустого тела запроса в Context::parse_multipart_data().
- Исправлена проблема с несработкой параметров в PostgreSQL-клиентском协程е.
- Исправлена проблема с崩溃ом curl при деструкторе.
- Исправлена проблема несовместимости Swoole5.x с новой версией xdebug.
- Исправлена проблема с ошибочным сообщением о несуществующей классе в процессе автоматического загрузки классов при переключении в协程.
- Исправлена проблема с невозможностью сборки swoole на OpenBSD.

## v5.1.0

### Новые функции

- Добавлена поддержка协程 для pdo_pgsql.
- Добавлена поддержка协程 для pdo_odbc.
- Добавлена поддержка协程 для pdo_oci.
- Добавлена поддержка协程 для pdo_sqlite.
- Добавлены настройки пула соединений для pdo_pgsql, pdo_odbc, pdo_oci, pdo_sqlite.

### Улучшения
- Улучшено производительность Http\Server, в экстремальных случаях можно увидеть до 60% увеличения.

### Исправления ошибок

- Исправлена утечка памяти при каждом запросе в WebSocket-клиентском协орде.
- Исправлена проблема с неelegантным завершением http-серверного协орда, который приводит к тому, что клиенты не выходят.
- Исправлена проблема с тем, что при сборке с использованием опции --enable-thread-context функция Process::signal() не работает.
- Исправлена проблема с ошибочным подсчетом соединений при неelegантном завершении процесса в режиме SWOOLE_BASE.
- Исправлена ошибка в сигнатуре функции stream_select().
- Исправлена проблема с чувствительностью к регистрам MIME-информации файла.
- Исправлена опечатка в свойстве usePipelineRead класса Http2\Request, которая в PHP 8.2 вызывает предупреждение.
- Исправлена проблема с утечкой памяти в режиме SWOOLE_BASE.
- Исправлена проблема с утечкой памяти при установке cookie с истекшим сроком действия в Http\Response::cookie().
- Исправлена проблема с утечкой соединений в режиме SWOOLE_BASE.

### Ядро

- Исправлена проблема с сигнатурой функции php_url_encode в swoole под PHP 8.3.
- Исправлена проблема с опциями для единичного тестирования.
- Оптимизация и переписывание кода.
- Сcompatибильность с PHP 8.3.
- Не поддерживается сборка на 32-битных операционных системах.

## v5.0.3

### Улучшения

- Добавлена опция --with-nghttp2_dir для использования библиотеки nghttp2 в системе.
- Поддержка опций, связанных с длиной или размером字节.
- Добавлена функция Process\Pool::sendMessage().
- Http\Response:cookie() теперь поддерживает max-age.

### Исправления ошибок

- Исправлена проблема утечки памяти, вызванная событием Server task/pipemessage/finish.

### Ядро

- Конфликты в заголовках http-ответа больше не будут вызывать ошибки.
- Закрытие соединения Server больше не будет вызывать ошибок.

## v5.0.2

### Улучшения

- Поддержка конфигурирования основных настроек для http2.
- Поддержка xdebug версии 8.1 и выше.
- переписан встроенный curl для поддержки многосocketных handle curl, например, для протокола ftp.
- В Process::setPriority/getPriority добавлен параметр who.
- Добавлена метод Coroutine\Socket::getBoundCid().
- Изменено значение по умолчанию параметра length в методах Coroutine\Socket::recvLine/recvWithBuffer на 65536.
- переписана функция выхода из cors, чтобы безопаснее освободить память и решить проблему с крахом при возникновении смертельных ошибок.
- Добавлены свойства socket для классов Coroutine\Client, Coroutine\Http\Client, Coroutine\Http2\Client, разрешающие прямое управление ресурсом socket.
- Поддержка отправки пустых файлов с Http\Server к клиентам http2.
- Поддержка элегантного перезагрузки Coroutine\Http\Server. Когда сервер закрывается, соединения клиентов больше не强制 закрываются, они просто перестают слушать новые запросы.
- Добавлены pcntl_rfork и pcntl_sigwaitinfo в список небезопасных функций, которые будут закрыты при запуске контейнера с корoutine.
- переписан процессный менеджер режима SWOOLE_BASE, чтобы поведение закрытия и перезагрузки было таким же, как в SWOOLE_PROCESS.

## v5.0.1

### Улучшения

- Поддержка PHP-8.2, улучшена обработка исключений в协орде, совместимость с ext-soap.
- Добавлена поддержка LOB для pgsql-клиентского协орда.
- Улучшен websocket-клиент, заголовки теперь содержат websocket вместо использования =.
- Оптимизирован http-клиент, при отправке Server connection close禁用 keep-alive.
- Оптимизирован http-клиент, без сжатия禁止 добавлять заголовок Accept-Encoding.
- Улучшена информация для отладки, в PHP-8.2 пароли теперь являются чувствительными параметрами.
- Улучшена функция Server::taskWaitMulti(), в контексте корoutine она больше не будет блокировать.
- Оптимизирована функция Logging, теперь при неудаче написания в файл лога она больше не будет печататься на экран.

### Исправления ошибок

- Исправлена проблема совместимости параметров функций Coroutine::printBackTrace() и debug_print_backtrace().
- Исправлена поддержка ресурсов сокета в Event::add().
- Исправлена ошибка при сборке без zlib.
- Исправлена проблема с крахом при распаковке задания Server при неправильном анализе как неожиданная строка.
- Исправлена проблема с принудительным установлением таймера менее 1ms на 0.
- Исправлена проблема с крахом при использовании Table::getMemorySize() до добавления столбца.
- Изменено название параметра истечения срока действия в методе Http\Response::setCookie() на expires.

## v5.0.0

### Новые функции

- Добавлена опция max_concurrency для Server.
- Добавлена опция max_retries для Coroutine\Http\Client.
- Добавлена глобальная опция name_resolver. Добавлена опция upload_max_filesize для Server.
- Добавлена функция Coroutine::getExecuteTime().
- Для Server добавлена опция SWOOLE_DISPATCH_CONCURRENT_LB dispatch_mode.
- Усилена система типов, для всех функций добавлены типы параметров и возврата.
- Оптимизирована обработка ошибок, все конструкторы теперь выбрасывают исключения при неудаче.
- Изменено默认ное поведение Server на SWOOLE_BASE.
- Переселен pgsql-клиентский协орде в ядро. Включены все исправления с ветки 4.8.x.

### Удаление

- Удалены классы в стиле PSR-0.
- Удалена функция автоматического добавления Event::wait() при закрытии функций.
- Удалены алиасы Server::tick/after/clearTimer/defer.
- Удалены опции --enable-http2/--enable-swoole-json, теперь они активированы по умолчанию.

### Отказано в поддержке

- Клиенты协орде Coroutine\Redis и Coroutine\MySQL по умолчанию отозваны.

## v4.8.13
### Улучшения

- Переосмысление оригинального cURL для поддержки cURL с множеством сокетов, например, для протокола FTP

- Поддержка ручного установки настроек `http2`

- Улучшение `WebSocket-клиента`, обновленные заголовки включают `websocket` вместо `equal`

- Оптимизация HTTP-клиента, при отправке сервером закрытия соединения отключение `keep-alive`

- Улучшение информации для отладки, в PHP-8.2 пароли установлены как чувствительные параметры

- Поддержка `HTTP Range Requests`



### Исправления

- Исправлена совместимость параметров функций `Coroutine::printBackTrace()` и `debug_print_backtrace()`

- Исправлена проблема неправильной 解析ировки длины при одновременном включении `HTTP2` и `WebSocket` протоколов на `WebSocket` сервере

- Исправлена проблема утечки памяти при возникновении `send_yield` в функциях `Server::send()`, `Http\Response::end()`, `Http\Response::write()` и `WebSocket/Server::push()`

- Исправлена проблема краха при использовании `Table::getMemorySize()` до добавления столбцов.


## v4.8.12



### Улучшения

- Поддержка PHP8.2

- Функция `Event::add()` теперь поддерживает `sockets resources`

- Функция `Http\Client::sendfile()` теперь поддерживает файлы размером более 4 ГБ
- Функция `Server::taskWaitMulti()` теперь поддерживает окружение с协程ами



### Исправления

- Исправлена проблема возникновения ошибок при получении неправильной `multipart body`

- Исправлена проблема ошибок из-за того, что таймеры просрочены более чем на `1ms`
- Исправлена проблемаDeadlock, вызванная полным диском


## v4.8.11



### Улучшения

- Поддержка `Intel CET` защитных механизмов безопасности

- Добавлена свойство `$ssl` класса `Server`

- При использовании `pecl` для компиляции `swoole` добавлена опция `enable-cares`
- Переосмысление интерпретатора `multipart_parser`



### Исправления

- Исправлена проблема с抛出ом исключений при持久化 соединениях с `pdo`

- Исправлена проблема с segmentation fault при использовании协程 в деструкторе
- Исправлена неправильная ошибка при закрытии `Server::close()`


## v4.8.10


### Исправления



- Когда параметр таймаута `stream_select` меньше `1ms`, его сбрасывается до `0`

- Исправлена проблема с неудачной компиляцией при использовании `-Werror=format-security`
- Исправлена проблема segmentation fault при использовании `curl` и `Swoole\Coroutine\Http\Server`


## v4.8.9


### Улучшения



- Поддержка опции `http_auto_index` в `Http2` сервере


### Исправления



- Оптимизирован парсер `Cookie`, теперь поддерживается опция `HttpOnly`

- Исправлена проблема #4657, Hook `socket_create` теперь имеет правильный тип возврата
- Исправлена утечка памяти в `stream_select`


### Обновления CLI



- В `CygWin` теперь включена цепочка сертификатов SSL, решив проблему с ошибками сертификации SSL
- Обновлено до `PHP-8.1.5`


## v4.8.8


### Оптимизации



- SW_IPC_BUFFER_MAX_SIZE уменьшен до 64k
- Оптимизирован setting header_table_size для http2


### Исправления



- Исправлена проблема с множеством сокетов при использовании enable_static_handler для скачивания статических файлов
- Исправлена ошибка NPN в http2 server


## v4.8.7


### Улучшения



- Добавлена поддержка curl_share


### Исправления



- Исправлена проблема с неопределенными символами в архитектуре arm32
- Исправлена совместимость `clock_gettime()`
- Исправлена проблема с отправкой в процессах в режиме PROCESS при отсутствии большого куска памяти в ядре


## v4.8.6


### Исправления



- Добавлен префикс к имени API boost/context
- Оптимизированы настройки конфигурации


## v4.8.5


### Исправления



- Восстановлено точное значение типа параметров для Table
- Исправлена проблема с crash при использовании Websocket-протокола при получении ошибочных данных


## v4.8.4


### Исправления



- Исправлена совместимость hooks с сокетами в PHP-8.1
- Исправлена совместимость Table с PHP-8.1
- Исправлена проблема неправильной интерпретации `Content-Type` в `POST` запросах с формами данных в стиле协程 HTTP-сервера при некоторых обстоятельствах


## v4.8.3


### Новые API



- Добавлена функция `Coroutine\Socket::isClosed()`


### Исправления



- Исправлена проблема совместимости原生 hook с cURL в версии PHP8.1
- Исправлена проблема совместимости hooks с сокетами в версии PHP8
- Исправлена проблема неправильной возврата значений функций hooks с сокетами
- Исправлена проблема с невозможностью установки content-type при использовании sendfile в Http2Server
- Оптимизирована производительность заголовка даты в HttpServer, добавлен cache


## v4.8.2


### Исправления



- Исправлена проблема утечки памяти в hook с proc_open
- Исправлена проблема совместимости原生 hook с cURL в версиях PHP-8.0 и PHP-8.1
- Исправлена проблема с неправильным закрытием соединений в процессе Manager
- Исправлена проблема с невозможностью использования sendMessage в процессе Manager
- Исправлена проблема с неправильной интерпретацией огромных POST данных в `Coroutine\Http\Server`
- Исправлена проблема с невозможностью нормального завершения в условиях смертельных ошибок в окружении PHP8
- Настройка опции `max_concurrency` для协程, теперь она может быть изменена только с помощью Co::set()
- Настройка Coroutine::join() для игнорирования несуществующих协程


## v4.8.1


### Новые API



- Добавлены функции `swoole_error_log_ex()` и `swoole_ignore_error()` (#4440) (@matyhtf)


### Улучшения



- Перес迁移 admin api из ext-swoole_plus в ext-swoole (#4441) (@matyhtf)
- В admin server добавлена команда get_composer_packages (swoole/library@07763f46) (swoole/library@8805dc05) (swoole/library@175f1797) (@sy-records) (@yunbaoi)
- Добавлена ограничение на количество запросов POST для операций写入 (swoole/library@ac16927c) (@yunbaoi)
- В admin server добавлена поддержка получения информации о методах классов (swoole/library@690a1952) (@djw1028769140) (@sy-records)
- Оптимизирован код admin server (swoole/library#128) (swoole/library#131) (@sy-records)
- В admin server добавлена поддержка одновременных запросов к множеству целей и одновременных запросов к множеству API (swoole/library#124) (@sy-records)
- В admin server добавлена поддержка получения информации о интерфейсах (swoole/library#130) (@sy-records)
- SWOOLE_HOOK_CURL теперь поддерживает CURLOPT_HTTPPROXYTUNNEL (swoole/library#126) (@sy-records)


### Исправления



- Метод join запрещает одновременный вызов одного и того же协程 (#4442) (@matyhtf)
- Исправлена проблема неправильной работы атомической блокировки Table (#4446) (@Txhua) (@matyhtf)
- Исправлена потерянная опция helper options (swoole/library#123) (@sy-records)
- Исправлена ошибка в параметрах команды get_static_property_value (swoole/library#129) (@sy-records)


## v4.8.0


### Несовместимости вниз



- В режиме base callback onStart будет всегда вызываться при запуске первого рабочего процесса (worker id = 0), до onWorkerStart (#4389) (@matyhtf)


### Новые API



- Добавлена функция `Co::getStackUsage()` (#4398) (@matyhtf) (@twose)
- Добавлены некоторые API `Coroutine\Redis` (#4390) (@chrysanthemum)
- Добавлена функция `Table::stats()` (#4405) (@matyhtf)
- Добавлена функция `Coroutine::join()` (#4406) (@matyhtf)


### Новые функции



- Поддержка команды server (#4389) (@matyhtf)
- Поддержка события onBeforeShutdown для Server (#4415) (@matyhtf)
### Улучшения

- Когда пакет WebSocket терпит неудачу, устанавливаются ошибка код (swoole/swoole-src@d27c5a5) (@matyhtf)
- Добавлен новый столбец `Timer::exec_count` (#4402) (@matyhtf)
- Hooks для mkdir поддерживают использование конфигурации open_basedir ini (#4407) (@NathanFreeman)
- В библиотеке добавлен новый скрипт vendor_init.php (swoole/library@6c40b02) (@matyhtf)
- SWOOLE_HOOK_CURL поддерживает опцию CURLOPT_UNIX_SOCKET_PATH (swoole/library#121) (@sy-records)
- Клиенты теперь могут устанавливать опцию ssl_ciphers (#4432) (@amuluowin)
- К `Server::stats()` добавлено несколько новых данных (#4410) (#4412) (@matyhtf)

### Исправления

- Исправлена ненужная декодировка имени файла при загрузке файлов (swoole/swoole-src@a73780e) (@matyhtf)
- Исправлен вопрос с max_frame_size в HTTP2 (#4394) (@twose)
- Исправлен баг с curl_multi_select (#4393) (#4418) (@matyhtf)
- Исправлена потерянная опция coroutine options (#4425) (@sy-records)
- Исправлен вопрос с тем, что соединение не может быть закрыто, когда буфер отправки полон (swoole/swoole-src@2198378) (@matyhtf)

## v4.7.1

### Улучшения

- `System::dnsLookup` теперь поддерживает запрос к `/etc/hosts` (#4341) (#4349) (@zmyWL) (@NathanFreeman)
- Добавлена поддержка контекстов boost для mips64 (#4358) (@dixyes)
- `SWOOLE_HOOK_CURL` теперь поддерживает опцию `CURLOPT_RESOLVE` (swoole/library#107) (@sy-records)
- `SWOOLE_HOOK_CURL` теперь поддерживает опцию `CURLOPT_NOPROGRESS` (swoole/library#117) (@sy-records)
- Добавлена поддержка контекстов boost для riscv64 (#4375) (@dixyes)

### Исправления

- Исправлен 内存ный баг PHP-8.1 при закрытии (#4325) (@twose)
- Исправлен нес序列изируемый класс из 8.1.0beta1 (#4335) (@remicollet)
- Исправлен баг с множественным созданием каталогов через co-routine (#4337) (@NathanFreeman)
- Исправлен случай с временным тайм-аутом отправки больших файлов через native curl в интернет и крах при использовании co-routine API для файла в функции CURL WRITEFUNCTION (#4360) (@matyhtf)
- Исправлен баг с ожиданием, когда первый параметр PDOStatement::bindParam() должен быть строкой (swoole/library#116) (@sy-records)

## v4.7.0

### Новые API

- Добавлен метод `Process\Pool::detach()` (#4221) (@matyhtf)
- `Server` теперь поддерживает обратный вызов `onDisconnect` (#4230) (@matyhtf)
- Добавлены методы `Coroutine::cancel()` и `Coroutine::isCanceled()` (#4247) (#4249) (@matyhtf)
- `Http\Client` теперь поддерживает опции `http_compression` и `body_decompression` (#4299) (@matyhtf)

### Улучшения

- Поддержка строгого типа полей при использовании co-routine MySQL клиента в `prepare` (#4238) (@Yurunsoft)
- DNS теперь поддерживает библиотеку `c-ares` (#4275) (@matyhtf)
- `Server` теперь поддерживает настройку времени сердцебиения для разных портов при многопортовом прослушивании (#4290) (@matyhtf)
- `Server` теперь поддерживает режимы диспетчеризации `SWOOLE_DISPATCH_CO_CONN_LB` и `SWOOLE_DISPATCH_CO_REQ_LB` (#4318) (@matyhtf)
- `ConnectionPool::get()` теперь поддерживает параметр `timeout` (swoole/library#108) (@leocavalcante)
- Hooks для Curl теперь поддерживают опцию `CURLOPT_PRIVATE` (swoole/library#112) (@sy-records)
- Оптимизирован метод `PDOStatementProxy::setFetchMode()` (#4301) (@yespire)

### Исправления

- Исправлен баг с созданием большого количества co-routine в контексте нити (#8ce5041) (@matyhtf)
- Исправлен потеря заголовка php_swoole.h при установке Swoole (#4239) (@sy-records)
- Исправлен несовместимость EVENT_HANDSHAKE (#4248) (@sy-records)
- Исправлен баг с повторным вызовом функции SW_LOCK_CHECK_RETURN 宏 (#4302) (@zmyWL)
- Исправлен баг с `Atomic\Long` на чипе M1 (#e6fae2e) (@matyhtf)
- Исправлен потеря возврата функции `Coroutine\go()` (#4310) (@matyhtf)
- Исправлен тип возврата `StringObject` (#4311) (@leocavalcante) (@sy-records)

### Ядро

- Запрещены Hooks для функций, уже запрещенных PHP (#4283) (@twose)

### Тестирование

- Добавлен тестовый режим для `Cygwin` (#4222) (@sy-records)
- Добавлены тесты для сборки на `alpine 3.13` и `3.14` (#4309) (@limingxinleo)

## v4.6.7

### Улучшения

- Manager процесс и Task синхронный процесс теперь могут вызывать функцию `Process::signal()` (#4190) (@matyhtf)

### Исправления

- Исправлен баг с повторной регистрацией сигналов (#4170) (@matyhtf)
- Исправлен проблемы со сборкой на OpenBSD/NetBSD (#4188) (#4194) (@devnexen)
- Исправлен потеря события onClose при прослушивании событий для написания (#4204) (@matyhtf)
- Исправлен проблемы с использованием native curl в Symfony HttpClient (#4204) (@matyhtf)
- Исправлен баг с постоянным возвращением true методом `Http\Response::end()` (swoole/swoole-src@66fcc35) (@matyhtf)
- Исправлен PDOException, возникающий из PDOStatementProxy (swoole/library#104) (@twose)

### Ядро

- Перестроен worker buffer, добавлен флаг msg id к event data (#4163) (@matyhtf)
- Изменен уровень日志ирования Request Entity Too Large на warning (#4175) (@sy-records)
- Заменены функции inet_ntoa и inet_aton (#4199) (@remicollet)
- Изменено значение по умолчанию output_buffer_size на UINT_MAX (swoole/swoole-src@46ab345) (@matyhtf)

## v4.6.6

### Улучшения

- Поддержка отправки сигнала SIGTERM Manager процессу после ухода Master процесса на FreeBSD (#4150) (@devnexen)
- Поддержка статической сборки Swoole в PHP (#4153) (@matyhtf)
- Поддержка SNI с использованием HTTP-прокси (#4158) (@matyhtf)

### Исправления

- Исправлен баг с ошибочным подключением асинхронного клиента к синхронному серверу (#4152) (@matyhtf)
- Исправлен утечка памяти из-за Hooking原生curl multi (swoole/swoole-src@91bf243) (@matyhtf)

## v4.6.5

### Новые API

- В WaitGroup добавлен метод count (swoole/library#100) (@sy-records) (@deminy)

### Улучшения

- Поддержка原生curl multi (#4093) (#4099) (#4101) (#4105) (#4113) (#4121) (#4147) (swoole/swoole-src@cd7f51c) (@matyhtf) (@sy-records) (@huanghantao)
- Позволяется использовать массивы для установки заголовков в Response HTTP/2

### Исправления

- Исправлен баг с сборкой на NetBSD (#4080) (@devnexen)
- Исправлен баг с сборкой на OpenBSD (#4108) (@devnexen)
- Исправлен баг с сборкой на illumos/solaris, когда только члены алиасов (#4109) (@devnexen)
- Исправление проблем с обнаружением пульсов в SSL-соединении, когда рукопожатие не завершено (#4114) (@matyhtf)

- Исправление ошибки, возникающей при использовании прокси с Http\Client, когда в `host` содержится `host:port` (#4124) (@Yurunsoft)
- Исправление настройки заголовков и кук в методе Swoole\Coroutine\Http::request (swoole/library#103) (@leocavalcante) (@deminy)


### Ядро



- Поддержка asm контекста на BSD (#4082) (@devnexen)

- Использование arc4random_buf для получения случайных данных на FreeBSD (#4096) (@devnexen)
- Оптимизация контекста ARM64 на darwin: удалениеWorkaround и использование label (#4127) (@devnexen)


### Тестирование


- Добавление脚本ов для сборки на Alpine (#4104) (@limingxinleo)


## v4.6.4


### Новые API


- Добавлены функции Coroutine\Http::request, Coroutine\Http::post, Coroutine\Http::get (swoole/library#97) (@matyhtf)


### Улучшения



- Поддержка сборки для ARM 64 (#4057) (@devnexen)
- Поддержка установки open_http_protocol в Swoole TCP сервере (#4063) (@matyhtf)
- Поддержка установки только сертификата для SSL-клиента (91704ac) (@matyhtf)
- Поддержка опции tcp_defer_accept на FreeBSD (#4049) (@devnexen)


### Исправления



- Исправление проблемы с отсутствием 代理 авторизации при использовании Coroutine\Http\Client (edc0552) (@matyhtf)
- Исправление проблемы с выделением памяти для Swoole\Table (3e7770f) (@matyhtf)
- Исправление crash при одновременном подключении клиентов в Coroutine\Http2\Client (630536d) (@matyhtf)
- Исправление проблемы с включением ssl_encrypt в DTLS (842733b) (@matyhtf)
- Исправление утечки памяти в Coroutine\Barrier (swoole/library#94) (@Appla) (@FMiS)
- Исправление ошибки, возникающей из-за неправильной последовательности CURLOPT_PORT и CURLOPT_URL (swoole/library#96) (@sy-records)
- Исправление ошибки при использовании `Table::get($key, $field)` при типе поля как float (08ea20c) (@matyhtf)
- Исправление утечки памяти в Swoole\Table (d78ca8c) (@matyhtf)


## v4.4.24


### Исправления


- Исправление crash при одновременном подключении клиентов в http2-клиенте (#4079)


## v4.6.3


### Новые API



- Добавлен функция Swoole\Coroutine\go (swoole/library@82f63be) (@matyhtf)
- Добавлен функция Swoole\Coroutine\defer (swoole/library@92fd0de) (@matyhtf)


### Улучшения



- Добавлена опция compression_min_length для HTTP-серверов (#4033) (@matyhtf)
- Позволено устанавливать заголовок Content-Length на уровне приложения (#4041) (@doubaokun)


### Исправления



- Исправление coredump при достижении лимита открытия файлов программным способом (swoole/swoole-src@709813f) (@matyhtf)
- Исправление проблемы с отключением JIT (#4029) (@twose)
- Исправление проблемы с неправильными параметрами при создании Response::create() (swoole/swoole-src@a630b5b) (@matyhtf)
- Исправление неправильного отчета о task_worker_id при отправке task на ARM-платформе (#4040) (@doubaokun)
- Исправление coredump при включении nativo curl hook в PHP8 (#4042)(#4045) (@Yurunsoft) (@matyhtf)
- Исправление ошибки из-за выхода за пределы памяти на этапе закрытия при возникновении fatal error (#4050) (@matyhtf)


### Ядро



- Оптимизация ssl_connect/ssl_shutdown (#4030) (@matyhtf)
- Прямое завершение процесса при возникновении fatal error (#4053) (@matyhtf)


## v4.6.2


### Новые API



- Добавлен метод `Http\Request\getMethod()` (#3987) (@luolaifa000)
- Добавлен метод `Coroutine\Socket->recvLine()` (#4014) (@matyhtf)
- Добавлен метод `Coroutine\Socket->readWithBuffer()` (#4017) (@matyhtf)


### Улучшения



- Улучшен метод `Response\create()`, который может использоваться независимо от Server (#3998) (@matyhtf)
- Поддержка возврата bool типа для метода `Coroutine\Redis->hExists` после установки compatibility_mode (swoole/swoole-src@b8cce7c) (@matyhtf)
- Поддержка установки опции PHP_NORMAL_READ для socket_read (swoole/swoole-src@b1a0dcc) (@matyhtf)


### Исправления



- Исправление проблемы с coredump при использовании Coroutine::defer в PHP8 (#3997) (@huanghantao)
- Исправление проблемы с неправильным установлением errCode для Coroutine\Socket при использовании thread context (swoole/swoole-src@004d08a) (@matyhtf)
- Исправление проблемы с неудачной сборкой Swoole на самой новой macos (#4007) (@matyhtf)
- Исправление проблемы с пустым указателем PHP stream context, когда параметр md5_file передается в url (#4016) (@ZhiyangLeeCN)


### Ядро



- Использование AIO-пулла线程 для hooking stdio (решение проблемы с многоп协程 чтением/записью, когда stdio рассматривался как socket) (#4002) (@matyhtf)
- Переосмысление HttpContext (#3998) (@matyhtf)
- Переосмысление `Process::wait()` (#4019) (@matyhtf)


## v4.6.1


### Улучшения



- Добавлена опция `--enable-thread-context` для сборки (#3970) (@matyhtf)
- Проверка наличия соединения при операции с session_id (#3993) (@matyhtf)
- Улучшение CURLOPT_PROXY (swoole/library#87) (@sy-records)


### Исправления



- Исправление проблемы с минимальной версией PHP для установки через PECL (#3979) (@remicollet)
- Исправление отсутствия опций `--enable-swoole-json` и `--enable-swoole-curl` при установке через PECL (#3980) (@sy-records)
- Исправление проблемы с многоп线程ностью OpenSSL (b516d69f) (@matyhtf)
- Исправление coredump при включении enableSSL (#3990) (@huanghantao)


### Ядро


- Оптимизация ipc writev, предотвращение возникновения coredump при пустом событии данных (9647678) (@matyhtf)


## v4.5.11


### Улучшения



- Оптимизация Swoole\Table (#3959) (@matyhtf)
- Улучшение CURLOPT_PROXY (swoole/library#87) (@sy-records)


### Исправления



- Исправление проблемы с неcleared всеми столбцами при увеличении и уменьшении в Table (#3956) (@matyhtf) (@sy-records)
- Исправление ошибки с `clock_id_t` при сборке (49fea171) (@matyhtf)
- Исправление ошибок fread (#3972) (@matyhtf)
- Исправление crash в многоп线程ном режиме SSL (7ee2c1a0) (@matyhtf)
- Исправление ошибки при неправильном формате uri, приводящей к ошибке Invalid argument supplied for foreach (swoole/library#80) (@sy-records)
- Исправление ошибки с неправильными параметрами trigger_error (swoole/library#86) (@sy-records)


## v4.6.0


### Несовместимые изменения вниз



- Удаление максимального ограничения для `session id`, artık не повторяется (#3879) (@matyhtf)
- Отключение небезопасных функций при использовании координационных потоков, включая `pcntl_fork`/`pcntl_wait`/`pcntl_waitpid`/`pcntl_sigtimedwait` (#3880) (@matyhtf)
- По умолчанию включен хук для координационных потоков (#3903) (@matyhtf)


### Удаление


- Отказ от поддержки PHP7.1 (4a963df) (9de8d9e) (@matyhtf)


### Отказ


- Marked `Event::rshutdown()` как устаревший, пожалуйста, используйте Coroutine\run (#3881) (@matyhtf)
### Новые API

- Поддержка установки и получения приоритетности (#3876) (@matyhtf)
- Поддержка хука native-curl (#3863) (@matyhtf) (@huanghantao)
- Поддержка передачи объектов в качестве параметров Callback функций событий Server, по умолчанию параметры не передаются в объектной форме (#3888) (@matyhtf)
- Поддержка хука для сокетов (#3898) (@matyhtf)
- Поддержка повторяющихся header (#3905) (@matyhtf)
- Поддержка SSL sni (#3908) (@matyhtf)
- Поддержка хука для stdio (#3924) (@matyhtf)
- Поддержка опции capture_peer_cert для stream_socket (#3930) (@matyhtf)
- Добавлены Http\Request::create/parse/isCompleted (#3938) (@matyhtf)
- Добавлена Http\Response::isWritable (db56827) (@matyhtf)

### Улучшения

- Все временные точности Server изменены с int на double (#3882) (@matyhtf)
- В функции swoole_client_select проверяется ситуация EINTR в функции poll (#3909) (@shiguangqi)
- Добавлена проверка заDeadlock координационных функций (#3911) (@matyhtf)
- Поддержка закрытия соединений в другом процессе в режиме SWOOLE_BASE (#3916) (@matyhtf)
- Оптимизация производительности коммуникации между главным процессом Server и рабочими процессами, уменьшение копирования памяти (#3910) (@huanghantao) (@matyhtf)

### Исправления

- Когда Coroutine\Channel закрыт, выкачиваются все данные из него (960431d) (@matyhtf)
- Исправлена памятьовая ошибка при использовании JIT (#3907) (@twose)
- Исправлен compilation error dtls при использовании `port->set()` (#3947) (@Yurunsoft)
- Исправлен error в connection_list (#3948) (@sy-records)
- Исправлена проверка SSL (#3954) (@matyhtf)
- Исправлен вопрос с нечетким увеличением и уменьшением в Table (#3956) (@matyhtf) (@sy-records)
- Исправлен compilation failure при использовании LibreSSL 2.7.5 (#3962) (@matyhtf)
- Исправлены неопределенные константы CURLOPT_HEADEROPT и CURLOPT_PROXYHEADER (swoole/library#77) (@sy-records)

### Ядро

- По умолчанию игнорируется сигнал SIGPIPE (9647678) (@matyhtf)
- Поддержка одновременного выполнения PHP координационных функций и C координационных функций (c94bfd8) (@matyhtf)
- Добавлен тест get_elapsed (#3961) (@luolaifa000)
- Добавлен тест get_init_msec (#3964) (@luffluo)

## v4.5.10

### Исправления

- Исправленаcoredump, возникающая при использовании Event::cycle (93901dc) (@matyhtf)
- COMPATIBILITY с PHP8 (f0dc6d3) (@matyhtf)
- Исправлен error в connection_list (#3948) (@sy-records)

## v4.4.23

### Исправления

- Исправлена ошибка данных при уменьшении Swoole\Table (bcd4f60d)(0d5e72e7) (@matyhtf)
- Исправлена ошибка информации о клиенте при синхронном соединении (#3784)
- Исправлена проблема с переполнением памяти при анализе данных формы (#3858)
- Исправлен bug канала, после закрытия невозможно выкачивать существующие данные

## v4.5.9

### Улучшения

- Добавлена константа SWOOLE_HTTP_CLIENT_ESTATUS_SEND_FAILED для Coroutine\Http\Client (#3873) (@sy-records)

### Исправления

- COMPATIBILITY с PHP8 (#3868) (#3869) (#3872) (@twose) (@huanghantao) (@doubaokun)
- Исправлена неопределенная константа CURLOPT_HEADEROPT и CURLOPT_PROXYHEADER (swoole/library#77) (@sy-records)
- Исправлена CURLOPT_USERPWD (swoole/library@7952a7b) (@twose)

## v4.5.8

### Новые API

- Добавлена функция swoole_error_log, оптимизированная для log_rotation (swoole/swoole-src@67d2bff) (@matyhtf)
- readVector и writeVector поддерживают SSL (#3857) (@huanghantao)

### Улучшения

- После завершения дочернего процесса позволяет System::wait завершаться в блокирующем режиме (#3832) (@matyhtf)
- DTLS поддерживает пакеты размером 16K (#3849) (@matyhtf)
- Метод Response::cookie поддерживает параметр priority (#3854) (@matyhtf)
- Поддерживается больше опций CURL (swoole/library#71) (@sy-records)
- 解决 проблема перекрытия HTTP header при анализе, когда они не различаются поCase (#3858) (@filakhtov) (@twose) (@sy-records)

### Исправления

- Исправлена ошибка обработки EAGAIN при readv_all и writev_all (#3830) (@huanghantao)
- Исправлена проблема с предупреждением о компиляции в PHP8 (swoole/swoole-src@03f3fb0) (@matyhtf)
- Исправлена проблема безопасности binary в Swoole\Table (#3842) (@twose)
- Исправлена проблема переписывания файла при использовании System::writeFile в MacOS (#3842) (@matyhtf)
- Исправлена проблема с CURLOPT_WRITEFUNCTION (swoole/library#74) (swoole/library#75) (@sy-records)
- Исправлена проблема переполнения памяти при анализе HTTP form-data (#3858) (@twose)
- Исправлена проблема с доступом к закрытым методам класса в PHP8 с использованием `is_callable()` (#3859) (@twose)

### Ядро

- Перепроектированы функции выделения памяти, использование SwooleG.std_allocator (#3853) (@matyhtf)
- Перепроектирован pipeline (#3841) (@matyhtf)

## v4.5.7

### Новые API

- Кlient Coroutine\Socket получил новые методы writeVector, writeVectorAll, readVector, readVectorAll (#3764) (@huanghantao)

### Улучшения

- Добавлены task_worker_num и dispatch_count в server->stats (#3771) (#3806) (@sy-records) (@matyhtf)
- Добавлены дополнительные зависимости, включая json, mysqlnd, sockets (#3789) (@remicollet)
- Минимальное значение uid для server->bind ограничено INT32_MIN (#3785) (@sy-records)
- Для swoole_substr_json_decode добавлены опции编译, поддерживающие отрицательное смещение (#3809) (@matyhtf)
- Поддержка опции CURLOPT_TCP_NODELAY (swoole/library#65) (@sy-records) (@deminy)

### Исправления

- Исправлена ошибка информации о подключении синхронного клиента (#3784) (@twose)
- Исправлена проблема с hook scandir (#3793) (@twose)
- Исправлена ошибка в барьере координации (swoole/library#68) (@sy-records)

### Ядро

- Использование boost.stacktrace для оптимизации print-backtrace (#3788) (@matyhtf)

## v4.5.6

### Новые API

- Добавлены [swoole_substr_unserialize](/functions?id=swoole_substr_unserialize) и [swoole_substr_json_decode](/functions?id=swoole_substr_json_decode) (#3762) (@matyhtf)

### Улучшения

- Метод onAccept в `Coroutine\Http\Server` изменен на частный (dfcc83b) (@matyhtf)

### Исправления

- Исправлена проблема с coverity (#3737) (#3740) (@matyhtf)
- Исправлены некоторые проблемы в Alpine окружении (#3738) (@matyhtf)
- Исправлена проблема с swMutex_lockwait (0fc5665) (@matyhtf)
- Исправлена проблема с неудачной установкой PHP-8.1 (#3757) (@twose)

### Ядро

- Добавлена проверка активности для `Socket::read/write/shutdown` (#3735) (@matyhtf)
- Тип session_id и task_id изменен на int64 (#3756) (@matyhtf)
## v4.5.5

!> Эта версия добавила функцию обнаружения настроек [config item](/server/setting), и если установлены опции, которые не предоставлены Swoole, будет выведен Warning.

```shell
PHP Warning:  unsupported option [foo] in @swoole-src/library/core/Server/Helper.php 
```

```php
$http = new Swoole\Http\Server('0.0.0.0', 9501);

$http->set(['foo' => 'bar']);

$http->on('request', function ($request, $response) {
    $response->header("Content-Type", "text/html; charset=utf-8");
    $response->end("<h1>Привет, Swoole. #".rand(1000, 9999)."</h1>");
});

$http->start();
```


### Новые API



- Добавлен Process\Manager, изменен Process\ProcessManager на псевдоним (swoole/library#eac1ac5) (@matyhtf)

- Поддержка HTTP2 сервера GOAWAY (#3710) (@doubaokun)
- Добавлена функция `Co\map()` (swoole/library#57) (@leocavalcante)


### Улучшения



- Поддержка HTTP2Unix сокета клиента (#3668) (@sy-records)

- После завершения рабочего процесса Worker его состояние изменяется на SW_WORKER_EXIT (#3724) (@matyhtf)

- В возвращаемом значении `Server::getClientInfo()` добавлены send_queued_bytes и recv_queued_bytes (#3721) (#3731) (@matyhtf) (@Yurunsoft)
- Сервер теперь поддерживает настройки stats_file (#3725) (@matyhtf) (@Yurunsoft)


### Исправления



- Исправлена проблема с compilацией в PHP8 (изменение zend_compile_string) (#3670) (@twose)

- Исправлена проблема с compilацией в PHP8 (совместимость с ext/sockets) (#3684) (@twose)

- Исправлена проблема с compilацией в PHP8 (изменение php_url_encode_hash_ex) (#3713) (@remicollet)

- Исправлена ошибка в преобразовании типа из 'const char*' to 'char*' (#3686) (@remicollet)

- Исправлена проблема с работой HTTP2 клиента через HTTP proxy (#3677) (@matyhtf) (@twose)

- Исправлена проблема с хаотизацией данных при reconnection PDO после обрыва связи (#3682) (@sy-records)

- Исправлена ошибка в анализе порта при использовании IPv6 в UDP Server (#3686) (@matyhtf)

- Исправлена проблема с недействительным таймаутом lock::lockwait (#3686) (@matyhtf)


## v4.5.4


### Взаимодействие с предыдущими версиями



- SWOOLE_HOOK_ALL теперь включает SWOOLE_HOOK_CURL (#3606) (@matyhtf)
- Удалено ssl_method, добавлены ssl_protocols (#3639) (@Yurunsoft)


### Новые API


- Добавлены методы firstKey и lastKey для массивов (swoole/library#51) (@sy-records)


### Улучшения


- Добавлены настройки open_websocket_ping_frame и open_websocket_pong_frame для WebSocket сервера (#3600) (@Yurunsoft)


### Исправления


- Исправлена проблема с правильным использованием fseek и ftell при работе с файлами больше 2 ГБ (#3619) (@Yurunsoft)

- Исправлена проблема с Socket barrier (#3627) (@matyhtf)

- Исправлена проблема с HTTP proxy handshake (#3630) (@matyhtf)

- Исправлена проблема с неправильным анализом HTTP Header при приеме chunk данных с другой стороны (#3633) (@matyhtf)

- Исправлена проблема с неудачным утверждением zend_hash_clean (#3634) (@twose)

- Исправлена проблема с невозможностью удалить broken fd из event loop (#3650) (@matyhtf)

- Исправлена проблема сcoredump при приеме недействительного packet (#3653) (@matyhtf)

- Исправлен баг с array_key_last (swoole/library#46) (@sy-records)


### Ядро



- Оптимизация кода (#3615) (#3617) (#3622) (#3635) (#3640) (#3641) (#3642) (#3645) (#3658) (@matyhtf)

- Уменьшение ненужных памяти операций при написании данных в Swoole Table (#3620) (@matyhtf)

- Перестройка AIO (#3624) (@Yurunsoft)

- Поддержка hooks readlink/opendir/readdir/closedir (#3628) (@matyhtf)

- Оптимизация создания swMutex_create, поддержка SW_MUTEX_ROBUST (#3646) (@matyhtf)


## v4.5.3


### Новые API



- Добавлен `Swoole\Process\ProcessManager` (swoole/library#88f147b) (@huanghantao)

- Добавлены методы append для ArrayObject и equals для StringObject (swoole/library#f28556f) (@matyhtf)

- Добавлен [Coroutine::parallel](/coroutine/coroutine?id=parallel) (swoole/library#6aa89a9) (@matyhtf)
- Добавлен [Coroutine\Barrier](/coroutine/barrier) (swoole/library#2988b2a) (@matyhtf)


### Улучшения



- Добавлена возможность использовать usePipelineRead для поддержки стриминга HTTP2 клиента (#3354) (@twose)

- При скачивании файла HTTP клиентом не создается файл до приема данных (#3381) (@twose)

- HTTP клиент теперь поддерживает настройки bind_address и bind_port (#3390) (@huanghantao)

- HTTP клиент теперь поддерживает настройки lowercase_header (#3399) (@matyhtf)

- `Swoole\Server` теперь поддерживает настройки tcp_user_timeout (#3404) (@huanghantao)

- `Coroutine\Socket` теперь поддерживает event barrier для снижения количества переключений协程 (#3409) (@matyhtf)

- Для конкретных swString добавлен 'memory allocator' (#3418) (@matyhtf)

- cURL теперь поддерживает `__toString` (swoole/library#38) (@twose)

- Теперь можно сразу установить 'wait count' в конструкторе WaitGroup (swoole/library#2fb228b8) (@matyhtf)

- Добавлена `CURLOPT_REDIR_PROTOCOLS` (swoole/library#46) (@sy-records)

- HTTP1.1 сервер теперь поддерживает trailern (#3485) (@huanghantao)

- Если время сна корoutine меньше 1ms, он будет relinquish текущий корoutine (#3487) (@Yurunsoft)

- Статический HTTP handler теперь поддерживает файлы с символическими ссылками (#3569) (@LeiZhang-Hunter)

- После того как Server вызовет метод close, WebSocket connection будет немедленно закрыто (#3570) (@matyhtf)

- Теперь поддерживается hook stream_set_blocking (#3585) (@Yurunsoft)

- асинхронный HTTP2 сервер теперь поддерживает управление трафиком (#3486) (@huanghantao) (@matyhtf)
- Снятие socket buffer после выполнения onPackage callback (#3551) (@huanghantao) (@matyhtf)


### Исправления



- Исправлена проблема сcoredump WebSocket,正确处理 protocol error status (#3359) (@twose)

- Исправлена проблема с пустым указателем в функциях swSignalfd_setup и wait_signal (#3360) (@twose)

- Исправлена проблема с ошибкой при вызове `Swoole\Server::close` после установки dispatch_func (#3365) (@twose)

- Исправлена проблема с неправильнымInitialization format_buffer в функции `Swoole\Redis\Server::format` (#3369) (@matyhtf) (@twose)

- Исправлена проблема с невозможностью получить MAC адрес на MacOS (#3372) (@twose)

- Исправлен тестовый кейс MySQL (#3374) (@qiqizjl)

- Исправлены проблемы совместимости с PHP8 (#3384) (#3458) (#3578) (#3598) (@twose)

- Исправлена проблема с потерей php_error_docref, timeout_event и возврата值的 в hook socket write (#3383) (@twose)

- Исправлена проблема с тем, что асинхронный Server не может закрыть Server в callback WorkerStart (#3382) (@huanghantao)

- Исправлена проблема сcoredump, когда heartbeat thread manipulates conn->socket (#3396) (@huanghantao)

- Исправлена логическая проблема с send_yield (#3397) (@twose) (@matyhtf)
- Исправление проблемы с компиляцией на Cygwin64 (#3400) (@twose)

- Исправление проблемы с недействительным свойством finish WebSocket (#3410) (@matyhtf)

- Исправление пропущенного состояния ошибки транзакции MySQL (#3429) (@twose)

- Исправление проблемы с несогласованным поведением stream_select после хука и до него (#3440) (@Yurunsoft)

- Исправление проблемы с потерей сигнала SIGCHLD при создании подпроцесса с использованием Coroutine\System (#3446) (@huanghantao)

- Исправление проблемы с поддержкой SSL для sendwait (#3459) (@huanghantao)

- Исправление нескольких проблем с ArrayObject и StringObject (swoole/library#44) (@matyhtf)

- Исправление ошибки в исключительной информации mysqli (swoole/library#45) (@sy-records)

- Исправление проблемы с неправильным получением errCode Swoole\Client при включении open_eof_check (#3478) (@huanghantao)

- Исправление нескольких проблем с wait() и wakeup() на MacOS (#3476) (@Yurunsoft)

- Исправление проблемы с возвращением успешного статуса при отказе в подключении в Client::connect (#3484) (@matyhtf)

- Исправление проблемы с неопределенным типом nullptr_t в условиях Alpine (#3488) (@limingxinleo)

- Исправление проблемы с двойной свободой памяти при скачивании файла с помощью HTTP Client (#3489) (@Yurunsoft)

- Исправление проблемы с утечкой памяти из-за не освобождения Server\Port после уничтожения Server (#3507) (@twose)

- Исправление проблемы с анализом протокола MQTT (318e33a) (84d8214) (80327b3) (efe6c63) (@GXhua) (@sy-records)

- Исправление проблемы сcoredump, вызванной методом getHeaderOut Coroutine\Http\Client (#3534) (@matyhtf)

- Исправление проблемы с потерей ошибочной информации после неудачной проверки SSL (#3535) (@twose)

- Исправление проблемы с ошибочным ссылку на benchmark Swoole в README (#3536) (@sy-records) (@santalex)

- Исправление проблемы с inyекцией header при использовании CRLF в HTTP header/cookie (#3539) (#3541) (#3545) (@chromium1337) (@huanghantao)

- Исправление проблемы с переменной, упомянутой в issue #3463 (#3547) (chromium1337) (@huanghantao)

- Исправление проблемы с опечаткой, упомянутой в pr #3463 (#3547) (@deminy)

- Исправление проблемы с пустым frame->fd в coroutine WebSocket server (#3549) (@huanghantao)

- Исправление проблемы с утечкой соединений из-за неправильной оценки состояния соединения в heartbeat thread (#3534) (@matyhtf)

- Исправление проблемы с блокировкой сигналов в Process\Pool (#3582) (@huanghantao) (@matyhtf)

- Исправление проблемы с отправкой заголовков с использованием send в SAPI (#3571) (@twose) (@sshymko)

- Исправление проблемы с отсутствием установки errCode и errMsg при неудачном выполнении CURL (#3591) (@matyhtf)

### Ядро

- Использование стиля C++ (#3349) (#3351) (#3454) (#3479) (#3490) (@huanghantao) (@matyhtf)

- Добавление "Списка известных строк Swoole" для повышения производительности чтения свойств PHP-объектов (#3363) (@huanghantao)

- Множество оптимизаций кода (#3350) (#3356) (#3357) (#3423) (#3426) (#3461) (#3463) (#3472) (#3557) (#3583) (@huanghantao) (@twose) (@matyhtf)

- Множество оптимизаций тестового кода (#3416) (#3481) (#3558) (@matyhtf)

- Упрощение типа int для Swoole\Table (#3407) (@matyhtf)

- Добавление sw_memset_zero и замена функции bzero (#3419) (@CismonX)

- Оптимизация модуля日志 (#3432) (@matyhtf)

- Множество перестроек libswoole (#3448) (#3473) (#3475) (#3492) (#3494) (#3497) (#3498) (#3526) (@matyhtf)

- Множество перестроек включения заголовочных файлов (#3457) (@matyhtf) (@huanghantao)

- Добавление count() и get_bytes() для Channel (#3504) (@matyhtf)

- Добавление scope guard (#3504) (@huanghantao)

- Увеличение покрытия тестов libswoole (#3431) (@huanghantao)

- Увеличение тестирования lib-swoole/ext-swoole в macOS (#3521) (@huanghantao)

- Увеличение тестирования lib-swoole/ext-swoole в Alpine (#3537) (@limingxinleo)


## v4.5.2

[v4.5.2](https://github.com/swoole/swoole-src/releases/tag/v4.5.2), это версия с исправлениями ошибок, без каких-либо несовместимых изменений с предыдущими версиями


### Улучшения



- Поддержка настройки `Server->set(['log_rotation' => SWOOLE_LOG_ROTATION_DAILY])` для генерации логов по дате (#3311) (@matyhtf)

- Поддержка `swoole_async_set(['wait_signal' => true])`, если есть слушатели сигналов, реактор не будет выходить (#3314) (@matyhtf)

- Поддержка отправки пустых файлов с помощью `Server->sendfile` (#3318) (@twose)

- Оптимизация предупреждений о занятости рабочих线程 (#3328) (@huanghantao)

- Оптимизация конфигурации заголовка Host в HTTPS прокси (использование ssl_host_name для настройки) (#3343) (@twose)

- По умолчанию SSL использует режим ecdh auto (#3316) (@matyhtf)
- Клиенты SSL тихо выходят при reconnection (#3342) (@huanghantao)


### Исправления



- Исправление проблемы с Server->taskWait на OS X (#3330) (@matyhtf)

- Исправление ошибки в анализе протокола MQTT (8dbf506b) (@guoxinhua) (2ae8eb32) (@twose)

- Исправление проблемы с переполнением int типа Content-Length (#3346) (@twose)

- Исправление проблемы с отсутствием проверки длины PRI пакета (#3348) (@twose)

- Исправление проблемы с невозможностью очистить CURLOPT_POSTFIELDS (#3348) (@twose)
- Исправление проблемы с невозможностью освободить новый объект соединения перед получением следующего соединения (#3348) (@twose)


### Ядро

- Особенности копирования нуля в сокетах (#3327) (@twose)
- Использование swoole_get_last_error/swoole_set_last_error вместо глобальных переменных для чтения и письма (e25f262a) (@matyhtf) (#3315) (@huanghantao)
- Поддержка настройки `log_date_format` для изменения формата даты в логах, `log_date_with_microseconds` для отображения микросекундных временных меток в логах (baf895bc) (@matyhtf)

- Поддержка CURLOPT_CAINFO и CURLOPT_CAPATH (swoole/library#32) (@sy-records)
- Поддержка CURLOPT_FORBID_REUSE (swoole/library#33) (@sy-records)


### Исправления



- Исправление проблемы с неудачным сборкой в 32-битной среде (#3276) (#3277) (@remicollet) (@twose)

- Исправление проблемы с отсутствием ошибки EISCONN при повторном подключении к协程 Client (#3280) (@codinghuang)

- Исправление потенциальной ошибки в модуле Table (d7b87b65) (@matyhtf)

- Исправление проблемы с пустым указателем из-за неопределенного поведения в Server (#3304) (#3305) (@twose)

- Исправление проблемы с пустым указателем после включения конфигурации сердцебиения (#3307) (@twose)

- Исправление проблем с нес functioning MySQLi конфигурации (swoole/library#35)
- Исправление проблемы с неправильным анализом заголовков в response (отсутствие пробелов) (swoole/library#27) (@Yurunsoft)


### Отказ


- Отметить методы Coroutine\System::(fread/fgets/fwrite) как устаревшие (пожалуйста, используйте hook özelliцию вместо них, напрямую используйте функции PHP для работы с файлами) (c7c9bb40) (@twose)


### Ядро



- Использование zend_object_alloc для выделения памяти для пользовательских объектов (cf1afb25) (@twose)

- Некоторые оптимизации, добавление большего количества конфигурационных параметров для модуля логов (#3296) (@matyhtf)
- Множество оптимизаций кода и добавление единичных тестов (swoole/library) (@deminy)


## v4.5.0

[v4.5.0](https://github.com/swoole/swoole-src/releases/tag/v4.5.0), это крупное обновление версий, в котором были удалены некоторые модули, уже отмеченные как устаревшие в v4.4.x


### Новые API



- Поддержка DTLS, теперь можно использовать эту функцию для создания приложений WebRTC (#3188) (@matyhtf)

- Встроенный клиент FastCGI, который позволяет передавать запросы через одну строку кода к FPM или вызывать приложения FPM (swoole/library#17) (@twose)

- `Co::wait`, `Co::waitPid` (для возврата дочерних процессов) `Co::waitSignal` (для ожидания сигналов) (#3158) (@twose)

- `Co::waitEvent` (для ожидания определенного события на сокете) (#3197) (@twose)

- `Co::set(['exit_condition' => $callable])` (для自定义程序 выхода условия) (#2918) (#3012) (@twose)

- `Co::getElapsed` (для получения времени выполнения协程, что удобно для анализа статистики или выявления зомби-协程) (#3162) (@doubaokun)

- `Socket::checkLiveness` (для определения активности соединения с помощью системного вызова), `Socket::peek` (для просмотра буфера чтения) (#3057) (@twose)

- `Socket->setProtocol(['open_fastcgi_protocol' => $bool])` (встроенная поддержка распаковки FastCGI) (#3103) (@twose)

- `Server::get(Master|Manager|Worker)Pid`, `Server::getWorkerId` (для получения асинхронного Server Singleton и его информации) (#2793) (#3019) (@matyhtf)

- `Server::getWorkerStatus` (для получения состояния worker процесса, возвращает константы SWOOLE_WORKER_BUSY, SWOOLE_WORKER_IDLE для обозначения busy/idle состояния) (#3225) (@matyhtf)

- `Server->on('beforeReload', $callable)` и `Server->on('afterReload', $callable)` (события перед и после перезагрузки, происходят в процессе manager) (#3130) (@hantaohuang)

- Статический обработчик файлов Http\Server теперь поддерживает конфигурацию `http_index_files` и `http_autoindex` (#3171) (@hantaohuang)

- Метод `Http2\Client->read(float $timeout = -1)` теперь поддерживает чтение потоковых ответов (#3011) (#3117) (@twose)

- `Http\Request->getContent` (также известный как метод rawContent) (#3128) (@hantaohuang)
- `swoole_mime_type_(add|set|delete|get|exists)()` (API mime, позволяет добавлять, устанавливать, удалять, получать и проверять встроенные mime-типы) (#3134) (@twose)


### Улучшения



- Оптимизация копирования памяти между master и worker процессами (в экстремальных случаях улучшилась в четыре раза) (#3075) (#3087) (@hantaohuang)

- Оптимизация логики отправки WebSocket сообщений (#3076) (@matyhtf)

- Оптимизация копирования памяти при создании WebSocket фрейма (#3097) (@matyhtf)

- Оптимизация модуля проверки SSL (#3226) (@matyhtf)

- Разделение на accept SSL и handshake SSL, решение проблемы с возможной ложной смертью серверов с использованием медленных клиентов SSL (#3214) (@twose)

- Поддержка архитектуры MIPS (#3196) (@ekongyun)

- UDP клиенты теперь могут автоматически анализировать входящие доменные имена (#3236) (#3239) (@huanghantao)

- Coroutine\Http\Server теперь поддерживает некоторые часто используемые опции (#3257) (@twose)

- Поддержка установки cookie во время WebSocket handshake (#3270) (#3272) (@twose)

- Поддержка CURLOPT_FAILONERROR (swoole/library#20) (@sy-records)

- Поддержка CURLOPT_SSLCERTTYPE, CURLOPT_SSLCERT, CURLOPT_SSLKEYTYPE, CURLOPT_SSLKEY (swoole/library#22) (@sy-records)
- Поддержка CURLOPT_HTTPGET (swoole/library@d730bd08) (@shiguangqi)


### Удаление



- Удаление метода `Runtime::enableStrictMode` (b45838e3) (@twose)
- Удаление класса `Buffer` (559a49a8) (@twose)


### Ядро-связанные



- Новая C++ API: функция coroutine::async принимает лямбда для запуска асинхронных задач в отдельном потоке (#3127) (@matyhtf)

- Переосмысление низкоуровневого API событий для преобразования целых fd в объекты swSocket (#3030) (@matyhtf)

- Все основные C-файлы были преобразованы в C++-файлы (#3030) (71f987f3) (@matyhtf)

- Множество оптимизаций кода (#3063) (#3067) (#3115) (#3135) (#3138) (#3139) (#3151) (#3168) (@hantaohuang)

- Оптимизация стандартизации заголовков (#3051) (@matyhtf)

- Переосмысление конфигурационного элемента `enable_reuse_port` для его более стандартизированного использования (#3192) (@matyhtf)

- Переосмысление API сокетов для их более стандартизированного использования (#3193) (@matyhtf)

- Предсказание буфера для уменьшения необходимости в лишнем системном вызове (3b5aa85d) (@matyhtf)

- Удаление низкоуровневого таймера обновления swServerGS::now, прямой доступ к времени с использованием функций времени (#3152) (@hantaohuang)

- Оптимизация конфигуратора протоколов (#3108) (@twose)

- Лучше совместимый способ инициализации C структур (#3069) (@twose)

- Единая типизация битовых полей как uchar (#3071) (@twose)
- Поддержка параллельных тестов, более быстрая скорость (#3215) (@twose)


### Исправления



- Исправление проблемы с невозможностью срабатывания onConnect после включения enable_delay_receive (#3221) (#3224) (@matyhtf)
- Все другие проблемы с ошибками были решены и включены в ветку v4.4.x, и здесь они не описываются снова
- Исправлена проблема с путаницей данных при reconnection после обрыва PDO (swoole/library#54) (@sy-records)

- Исправлена проблема с ожиданием блокировки swMutex_lockwait (0fc5665) (@matyhtf)

- Исправлена ошибка в анализе порта при использовании IPv6 в UDP Server

- Исправлена проблема с systemd fds

## v4.4.20

[v4.4.20](https://github.com/swoole/swoole-src/releases/tag/v4.4.20), это версия с исправлениями багов, без каких-либо несовместимых изменений с предыдущими версиями

### Исправления

- Исправлена ошибка при вызове `Swoole\Server::close` после установки функции диспетчеризации (#3365) (@twose)

- Исправлена проблема с инициализацией format_buffer в функции `Swoole\Redis\Server::format` (#3369) (@matyhtf) (@twose)

- Исправлена проблема с получением MAC адреса на macOS (#3372) (@twose)

- Исправлены тестовые случаи MySQL (#3374) (@qiqizjl)

- Исправлена проблема с закрытием Server в обратном вызове `WorkerStart` для асинхронного Server (#3382) (@huanghantao)

- Исправлена пропущенная ошибка состояния транзакции MySQL (#3429) (@twose)

- Исправлена проблема с двойным освобождением памяти при скачивании файла с помощью HTTP Client (#3489) (@Yurunsoft)

- Исправлена проблема сcoredump, вызванная методом `Coroutine\Http\Client->getHeaderOut` (#3534) (@matyhtf)

- Исправлена проблема с inyекцией заголовка из-за использования `CRLF` в `HTTP header/cookie` (#3539) (#3541) (#3545) (@chromium1337) (@huanghantao)

- Исправлена проблема с пустым frame->fd в协程 WebSocket сервере (#3549) (@huanghantao)

- Исправлена проблема с ошибкой чтения на соединении, вызванной hook phpredis (#3579) (@twose)

- Исправлены проблемы с анализом протокола MQTT (#3573) (#3517) (9ad2b455) (@GXhua) (@sy-records)

## v4.4.19

[v4.4.19](https://github.com/swoole/swoole-src/releases/tag/v4.4.19), это версия с исправлениями багов, без каких-либо несовместимых изменений с предыдущими версиями

!> Внимание: v4.4.x больше не является основной версией поддержки, исправления багов будут применяться только при необходимости

### Исправления

- Сочетаны все исправления багов из v4.5.2

## v4.4.18

[v4.4.18](https://github.com/swoole/swoole-src/releases/tag/v4.4.18), это версия с исправлениями багов, без каких-либо несовместимых изменений с предыдущими версиями

### Улучшения

- UDP клиент теперь может автоматически анализировать传入ные домены (#3236) (#3239) (@huanghantao)

- В режиме CLI больше не закрываются stdout и stderr (показываются ошибки, возникающие после остановки) (#3249) (@twose)

- Coroutine\Http\Server теперь поддерживает некоторые общие опции (#3257) (@twose)

- Поддерживается установка cookie во время WebSocket handshake (#3270) (#3272) (@twose)

- Поддерживается опция CURLOPT_FAILONERROR (swoole/library#20) (@sy-records)

- Поддерживаются опции CURLOPT_SSLCERTTYPE, CURLOPT_SSLCERT, CURLOPT_SSLKEYTYPE, CURLOPT_SSLKEY (swoole/library#22) (@sy-records)

- Поддерживается опция CURLOPT_HTTPGET (swoole/library@d730bd08) (@shiguangqi)

- Максимально совместимо со всеми версиями PHP-Redis расширений (различные версии имеют разные параметры конструктора) (swoole/library#24) (@twose)
- Запрещено клонировать объекты соединения (swoole/library#23) (@deminy)

### Исправления

- Исправлена проблема с неудачным SSL handshake (dc5ac29a) (@twose)

- Исправлена проблема с памятью, возникающей при генерации ошибочной информации (#3229) (@twose)

- Исправлена пустая информация для проверки proxy (#3243) (@twose)

- Исправлена проблема с утечкой памяти в Channel (не настоящая утечка памяти) (#3260) (@twose)

- Исправлена проблема с одноразовой утечкой памяти при циклическом引用е Co\Http\Server (#3271) (@twose)

- Исправлена ошибка в написании в `ConnectionPool->fill` (swoole/library#18) (@NHZEX)

- Исправлена проблема с необновлением соединения при перенаправлении с помощью curl клиента (swoole/library#21) (@doubaokun)

- Исправлена проблема с пустым указателем при возникновении ioException (swoole/library@4d15a4c3) (@twose)

- Исправлена проблема сDeadlock, вызванная передачей null в `ConnectionPool@put` без возврата нового соединения (#325) (@Sinute)

- Исправлена проблема с ошибкой write_property в реализации proxy mysqli (swoole/library#26) (@twose)

## v4.4.17

[v4.4.17](https://github.com/swoole/swoole-src/releases/tag/v4.4.17), это версия с исправлениями багов, без каких-либо несовместимых изменений с предыдущими версиями

### Улучшения

- Повышена производительность SSL сервера (#3077) (85a9a595) (@matyhtf)

- Удалено ограничение размера HTTP заголовка (#3187) limitation (@twose)

- Поддержка MIPS (#3196) (@ekongyun)

- Поддержка опции CURLOPT_HTTPAUTH (swoole/library@570318be) (@twose)

### Исправления

- Исправлена поведение функции package_length_func и возможная утечка памяти один раз (#3111) (@twose)

- Исправлено неправильное поведение при HTTP статусе 304 (#3118) (#3120) (@twose)

- Исправлена проблема с ошибкой 宏 расширения Trace日志, приводящая к памяти (#3142) (@twose)

- Исправлены подписи функций OpenSSL (#3154) (#3155) (@twose)

- Исправлена информация об ошибках SSL (#3172) (@matyhtf) (@twose)

- Исправлена совместимость с PHP 7.4 (@twose) (@matyhtf)

- Исправлена проблема с неправильным анализом длины HTTP chunk (#3172) (@twose)

- Исправлено поведение парсера многочастного запроса в режиме chunked (#3172) (@twose)

- Исправлена проблема с неудачным утверждением ZEND_ASSUME в режиме PHP-Debug (#3172) (@twose)

- Исправлена проблема с ошибочным адресом сокета (d72c5e3a) (@twose)

- Исправлены проблемы с получением имени сокета (#3177) (#3179) (@matyhtf)

- Исправлено неправильное обращение с пустым файлом в обработчике статических файлов (#3182) (@twose)

- Исправлена проблема с загрузкой файлов на Coroutine\Http\Server (#3189) (#3191) (@twose)

- Исправлена возможная проблема с памятью во время остановки (#3182) (@matyhtf)

- Исправлена проблема с heartbeat Server->heartbeat (#3203) (@matyhtf)

- Исправлена возможность того, что CPU диспетчер не сможет планировать бесконечный цикл (#3207) (@twose)

- Исправлена неправильное обращение с неизменным массивом (#3212) (@twose)

- Исправлена проблема с многократным ожиданием WaitGroup (swoole/library@537a82e1) (@twose)

- Исправлена обработка пустых header (в соответствии с cURL) (swoole/library@7c92ed5a) (@twose)

- Исправлена проблема с выбрасыванием исключения, когда методы, не являющиеся IO, возвращают false (swoole/library@f6997394) (@twose)

- Исправлена проблема с повторным добавлением порта proxy в заголовки при использовании cURL-hook (swoole/library@5e94e5da) (@twose)

## v4.4.16

[v4.4.16](https://github.com/swoole/swoole-src/releases/tag/v4.4.16), это версия с исправлениями багов, без каких-либо несовместимых изменений с предыдущими версиями

### Улучшения
Теперь вы можете получить информацию о поддержке версий Swoole: [Список поддерживаемых версий Swoole](https://github.com/swoole/swoole-src/blob/master/SUPPORTED.md)
		
Более дружественный информационный сообщение об ошибке (0412f442) (09a48835) (@twose)
		
Предотвращение попадания в вечный цикл системных вызовов на некоторых особых системах (069a0092) (@matyhtf)
- Добавление драйверных опций в PDOConfig (swoole/library#8) (@jcheron)

### Исправления

- Исправлена памяти в http2_session.default_ctx (bddbb9b1) (@twose)

- Исправлено неопределенное значение http_context (ce77c641) (@twose)

- Исправлен опечатка в модуле Table (может привести к памяти) (db4eec17) (@twose)

- Исправлена потенциальная проблема с task-reload в Server (e4378278) (@GXhua)

- Исправлены проблемы с неполным запросом HTTP-сервера на основе корутин (оригинал запроса #3079) (#3085) (@hantaohuang)

- Исправлена static handler (когда файл пуст, не следует возвращать 404 ответ) (#3084) (@Yurunsoft)

- Исправлено неисправное поведение config http_compression_level (16f9274e) (@twose)

- Исправлен null-pointer exception в Coroutine HTTP2 Server из-за невегистрации handle (ed680989) (@twose)

- Исправлен отказ работы с config socket_dontwait (27589376) (@matyhtf)

- Исправлены возможности многократного выполнения zend::eval (#3099) (@GXhua)
- Исправлена null-pointer exception в HTTP2 Server из-за ответа после закрытия соединения (#3110) (@twose)
- Исправлена неправильная работа метода PDOStatementProxy::setFetchMode (swoole/library#13) (@jcheron)
