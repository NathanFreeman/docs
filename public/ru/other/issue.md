# Подача отчета об ошибке

## Известно

Когда вы считаете, что обнаружили ошибку в ядре Swoole, пожалуйста, подайте отчет. Возможно, разработчики ядра Swoole еще не знают о проблемы, и если вы не подадите отчет самостоятельно, ошибка может быть трудно обнаружена и исправлена. Вы можете подать отчет об ошибке (то есть нажать зеленую кнопку `Новая проблема` в правом верхнем углу) в [зоне вопросов на GitHub](https://github.com/swoole/swoole-src/issues), где ошибки будут решены в первую очередь.

Пожалуйста, не отправляйте отчеты об ошибках в списки рассылок или частные письма. Зона вопросов на GitHub также может быть использована для подачи любых требований и предложений по Swoole.

Перед тем как подать отчет об ошибке, пожалуйста, прочтите следующие **инструкции по подаче отчета об ошибке**.

## Создание проблемы

Во время создания проблемы система предоставит следующий шаблон, пожалуйста, внимательно заполните его, иначе проблема может быть проигнорирована из-за отсутствия информации:

```markdown

Пожалуйста, ответьте на эти вопросы перед подаче вашей проблемы. Спасибо!
> Перед подаче Issue пожалуйста ответьте на следующие вопросы:
	
1. Что вы сделали? Если возможно, предоставьте простой скрипт для воспроизведения ошибки.
> Пожалуйста, подробно описать процесс возникновения проблемы, прикрепите связанный код, лучше всего предоставить простой скрипт, который может стабильно воспроизвести ошибку.

2. Что вы ожидали видеть?
> Какое было ожидаемое результаты?

3. Что вы видели вместо этого?
> Какие результаты вы получили при 실ении?

4. Какой версия Swoole вы используете (`php --ri swoole`)?
> Ваша версия? Поделитесь содержанием, которое печатается `php --ri swoole`	

5. Какова ваша машина и окружающая среда (включая версии ядра, PHP и gcc)?
> Какова ваша машина и окружающая среда (включая версии ядра, PHP и gcc)?	
> Можно использовать команды `uname -a`, `php -v`, `gcc -v` для печати информации

```

Самое важное - предоставить **простой скрипт, который может стабильно воспроизвести ошибку**, иначе вам необходимо предоставить как можно больше другой информации, чтобы помочь разработчикам определить причину ошибки

## Анализ памяти (рекомендован)

Часто Valgrind обнаруживает проблемы с памятью лучше, чем gdb. Выполните следующий командный ряд, чтобы запустить ваш программы до возникновения ошибки

```shell
USE_ZEND_ALLOC=0 valgrind --log-file=/tmp/valgrind.log php your_file.php
```

* Когда программа терпит ошибку, вы можете выйти, нажав `ctrl+c`, затем отправить файл `/tmp/valgrind.log` для того, чтобы группа разработчиков могла определить причину ошибки.

## О ошибках сегментации памяти (ядерный сброс)

Кроме того, в определенных случаях вы можете использовать инструменты отладки для помощи разработчикам в определении проблемы

```shell
WARNING	swManager_check_exit_status: worker#1 abnormal exit, status=0, signal=11
```

Когда такая запись появляется в логах Swoole (сигнал 11), это означает, что программа mengalami `ядерный сброс`, и вам нужно использовать инструмент отслеживания отладки для определения местоположения проблемы

> Для отслеживания `swoole` с помощью `gdb` необходимо добавить параметр `--enable-debug` при сборке, чтобы сохранить больше информации

Включить файл ядерного сброса
```shell
ulimit -c unlimited
```

Триггерировать ошибку, ядро будет генерироваться в каталоге программы или в системном корневом каталоге или в каталоге `/cores` (в зависимости от вашей системной конфигурации)

Введите следующие команды для входа в gdb и отладки программы

```
gdb php core
gdb php /tmp/core.1234
```

Затем введите `bt` и нажмите Enter, чтобы увидеть стек вызовов, вызвавших проблему
```
(gdb) bt
```

Вы можете использовать команду `f номер` для просмотра указанного стека вызовов
```
(gdb) f 1
(gdb) f 0
```

Поделитесь всей этой информацией в Issue

