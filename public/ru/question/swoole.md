# Происхождение проекта Swoole и значение его названия

!> Эта страница написана основателем открытого проекта Swoole, Рангом, и представляет его личное мнение.

## Происхождение проекта

Первая идея проекта Swoole возникла из предыдущего корпоративного программного проекта. В конце 2010 года у нашей компании был Requirement, чтобы пользователи могли свободно создавать электронные адреса и другие пользователи могли отправлять им письма, а бэк-офис должен был в реальном времени анализировать содержание писем и уведомлять пользователей. В то время проект был разработан на PHP, и при реализации этого требования возникли трудности, так как PHP мог полагаться только на другие SMTP-серверы и регулярно проверять новые письма по POP3-протоколу, что не было реалистичным. Для реализации реального времени система нужно было написать собственный `TCP Socket Server`, который бы реализовывал SMTP-протокол для приема данных. В то время в этой области PHP был почти пуст, не было ни одной зрелой сетевой коммуникационной фреймворка. Чтобы реализовать requirement, я изучил `socket`, затем `TCP/IP`, IO-мультиплication, `libevent`, многопроцессорность и, наконец, реализовал эту программу. После завершения этого проекта я хотел открыть его源码, надеясь помочь другим PHP-разработчикам решить проблемы в этой области. Если бы был такой фреймворк, то PHP мог бы расшириться от простого веб-сайта до больших пространств.

## Проблемы с производительность

Еще одна важная причина - проблемы с производительность PHP-программ. Я изначально был обучен на Java и только позже стал PHP-разработчиком. В процессе разработки программ на PHP я всегда задавал себе вопрос: в чем основная преимущество PHP по сравнению с Java? Простота и эффективность: после выполнения запроса PHP освобождает все ресурсы и память, не нужно беспокоиться о утечке памяти. Качество кода, независимо от его уровня, работает очень гладко. Но это также и смертельная проблема PHP. Как только количество запросов увеличивается и Concurrent становится высоким, быстро создание ресурсов и их немедленное освобождение приводит к резкому снижению эффективности работы PHP-программ. Кроме того, по мере усложнения функций проекта и увеличения количества кода это становится катастрофой для PHP. Вот почему фреймворки PHP не нашли широкого распространения среди PHP-разработчиков, в то время как у Java нет этой проблемы. Даже самый хороший фреймворок может быть замедлен этим неэффективным способом, что приводит к замедлению системы. Поэтому я подумал о использовании PHP для разработки серверных приложений PHP, чтобы код PHP, загруженный в память, имел более длинный жизненный цикл, так что установленные数据库ные соединения и другие большие объекты не освобождаются. Каждый запрос обрабатывает только немного кода, и этот код анализируется PHP-интерпретатором и остается в памяти только при первом запуске. Кроме того, то, что раньше не мог реализовать PHP, такие как долговечность объектов, пул соединений с базой данных, пул кэшированных соединений, теперь можно реализовать. Эффективность работы системы значительно возрастет.

После некоторого времени исследований я уже достиг начальной реализации. Используя сам PHP для написания HTTP-сервера, который работает как отдельный сервер, время выполнения одной страницы программы (с объектами создания, подключением к базе данных, операциями с шаблонами Smarty) сократилось с первоначальных 0.0x секунды до 0.00x секунды. Используя Apache AB для тестирования с并发ностью 100. По сравнению с традиционным LAMP-мودелями, количество запросов в секунду на 10 раз выше. На моем тестовом компьютере (Ubuntu10.04 Inter Core E5300 + 2G памяти) Apache достигал только 83RPS. Swoole Server мог достичь более 1150RPS.

Этот проект стал прототипом Swoole. Эта версия поддерживалась более двух лет, и в этот период были накоплены некоторые опыт и более глубокое понимание проблем, существующих в этой технической схеме, таких как низкая производительность, множество ограничений, не позволяющих напрямуюanggil операционные системы интерфейсы, низкая эффективность управления памятью.

## Присоединение к Tencent

В конце 2011 года я присоединился к Tencent и начал работать над разработкой платформы PHP для сайта друзей. К своему удивлению, я обнаружил, что коллеги из команды сайта друзей не только думали об этом, они уже это сделали. Команда сайта друзей уже использовала эту схему в производственной среде. На сайте друзей есть три основных элемента: PWS, SAPS и PSF. PWS - это полностью написанный на PHP веб-сервер, на котором работает более 600 серверов в 线上, и не используется ни Apache, ни PHP-FPM и т.д. SAPS - это распределенный队列, полностью разработанный на чистом PHP, который в то время работал на кластере около 150 серверов, и многие логические операции, такие как обрезка изображений, обработка аватаров, одновременное общение, синхронизация данных и т.д., полностью использовались SAPS для асинхронизации логики. PSF - это серверный фреймворк, реализованный на PHP, и многие серверныеervices на логическом уровне сайта друзей были основаны на PSF. Около 300 кластеров работали на серверных программах PSF. Во время работы на сайте друзей я узнал много о Linux на уровне ядра, сетевом общении, накопил много опыта отслеживания и диагностики сетевого общения в условиях высокой concurrency большого кластера, что заложило хорошую основу для разработки Swoole.

## Разработка Swoole

В это время я также изучил и понял такие отличные технические решения, как Node.js и Golang, и получил больше вдохновения. В 2012 году у меня появилась новая идея и я решил заново реализовать более мощную и функциональную версию на C языке. Это и есть сегодняшний Swoole-расширение.

Сегодня Swoole используется многими PHP-техническими командами для разработки реальных проектов, как внутри страны, так и за рубежом. Среди известных в Китае - Центр заказов Baidu, Карта Baidu, официальный аккаунт QQ Tencent и корпоративный QQ, прямые трансляции Zhanqi, 360, Dangdang, Qunar и другие. Кроме того, многие проекты в области интернета вещей, аппаратного обеспечения и игр также используют Swoole. Кроме того, все больше появляется открытих фреймворков на основе Swoole, таких как TSF, Blink, swPromise и т.д., и на GitHub можно найти много проектов и кода, связанных с Swoole.

## Происхождение названия

Название Swoole не является английским словом, это слово, похожее по звучанию, которое я создал. Сначала я подумал назвать его `sword-server`, что означает создание острым мечом для широкой общественности PHP-разработчиков, затем я вспомнил, что Google тоже был создан из ничего, поэтому я назвал его `swoole`.
